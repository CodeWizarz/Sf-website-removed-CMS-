@include desktop {
  .title {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    --duration: 1.2s;
    transition: 1500ms opacity var(--ease-out-expo);
    transition-delay: 850ms;

    > * {
      position: relative;
      theme-primary-space: nowrap;
    }

    .text {
      position: relative;
      transition-property: opacity;
      transition-duration: 0s;
      transition-delay: calc(var(--duration) * 0.5);
    }

    &:not(.visible) {
      opacity: 0;
      .text {
        opacity: 0;
        transition: unset;
      }
    }

    .mask {
      --inset: #{desktop-vw(-12px)};
      --delay: calc(var(--i) * 100ms);

      @keyframes parent-appear {
        0% {
          transform: scaleX(0);
          transform-origin: left;
        }

        50% {
          transform: scaleX(1);
          transform-origin: left;
        }

        51% {
          transform: scaleX(1);
          transform-origin: right;
        }

        100% {
          transform: scaleX(0);
          transform-origin: right;
        }
      }

      @keyframes child-appear {
        0% {
          transform: scaleX(0);
        }

        50% {
          transform: scaleX(0);
        }

        100% {
          transform: scaleX(1);
        }
      }

      position: absolute;
      inset: var(--inset);
      display: block;
      background-color: var(--theme-primary);
      z-index: 2;
      transform: scaleX(0);
      transform-origin: left;
      animation-delay: var(--delay) !important;

      &::after {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: var(--theme-secondary);
        animation-delay: var(--delay) !important;
        transform-origin: left;
        transform: scaleX(0);
      }
    }

    &.visible {
      .mask {
        animation: parent-appear var(--duration) var(--ease-in-out-expo);

        &::after {
          animation: child-appear var(--duration) var(--ease-in-out-expo);
        }
      }
    }
  }
}
